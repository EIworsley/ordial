

<script type="text/javascript" src="node_modules/underscore/underscore.js"></script>
<script type="text/javascript" src="node_modules/jquery/dist/jquery.js"></script>
<script type="text/javascript" src="node_modules/backbone/backbone.js"></script>
<script type="text/javascript" src="/vendor/seedrandom/seedrandom.js"></script>

<script type="text/javascript" src="src/World.js"></script>
<script type="text/javascript" src="src/WorldView.js"></script>
<script type="text/javascript" src="src/PauseView.js"></script>
<script type="text/javascript" src="src/SeedView.js"></script>
<script type="text/javascript" src="src/Seed.js"></script>
<script src="src/ordial.js"></script>
<script type="text/javascript" src="src/OrdialScheduler.js"></script>
<script type="text/javascript" src="src/critter/DecisionNode.js"></script>
<script type="text/javascript" src="src/critter/Critter.js"></script>
<script type="text/javascript" src="src/critter/CritterMind.js"></script>
<script type="text/javascript" src="src/CardinalDirection.js"></script>
<script type="text/javascript" src="src/RelativeDirection.js"></script>
<script type="text/javascript" src="src/critter/CritterView.js"></script>
<script type="text/javascript" src="src/Resource.js"></script>
<script type="text/javascript" src="src/ResourceView.js"></script>
<script type="text/javascript" src="src/Rock.js"></script>
<script type="text/javascript" src="src/RockView.js"></script>
<script type="text/javascript" src="src/StimulusPackager.js"></script>
<script type="text/javascript" src="src/TheVoid.js"></script>


<link rel="stylesheet" type="text/css" href="src/css/ordial.css">

<div id="ordial">
  <div id="seedContainer"></div>
  <div id="pauseContainer"></div>
  <div id="world"></div>
</div>

<script type="text/javascript">
  $(function() {
    var ordial = new Ordial();
    $("#runCode").click(function() {
      ordial.world.initialize();
      eval($("#code").val());
    });
  });
</script>

<h3>Active Code</h3>
<textarea id="code">

  var isSomethingInFrontOfMe = function (stimuli) {
  return stimuli.thingInFrontOfMe;
  };
  var isThingInFrontOfMeEdible = function (stimuli) {
  return stimuli.thingInFrontOfMe instanceof Resource;
  };
  var isNothingToTheLeftOfMe = function (stimuli) {
  return !stimuli.thingToTheLeftOfMe;
  };
  var isLeftThingEdible = function (stimuli) {
  console.log(3)
  return stimuli.thingToTheLeftOfMe && stimuli.thingToTheLeftOfMe instanceof Resource;
  };
  var leftEdibleLeftElse = function (alternativeNode) {
  return new DecisionNode(isLeftThingEdible, Critter.Actions.TURN_LEFT, alternativeNode);
  };

  var isRightThingEdible = function (stimuli) {
  console.log(2)
  return stimuli.thingToTheRightOfMe && stimuli.thingToTheRightOfMe instanceof Resource;
  };
  var rightEdibleRightElse = function (alternativeNode) {
  return new DecisionNode(isRightThingEdible, Critter.Actions.TURN_RIGHT, alternativeNode);
  };

  var isForwardThingEdible = function (stimuli) {
  console.log(1)
  return stimuli.thingInFrontOfMe && stimuli.thingInFrontOfMe instanceof Resource;
  };
  var forwardEdibleForwardElse = function (alternativeNode) {
  return new DecisionNode(isForwardThingEdible, Critter.Actions.MOVE_FORWARD, alternativeNode);
  };


  var turnLeftOrTurnRight = new DecisionNode(isNothingToTheLeftOfMe, Critter.Actions.TURN_LEFT, Critter.Actions.TURN_RIGHT);
  var eatItOrThink = new DecisionNode(isThingInFrontOfMeEdible, Critter.Actions.MOVE_FORWARD, turnLeftOrTurnRight);
  var moveForwardOrThink = new DecisionNode(isSomethingInFrontOfMe, eatItOrThink, Critter.Actions.MOVE_FORWARD);

  var rob = new Critter({mind: new CritterMind({decisionTree: moveForwardOrThink})});


  var tree = forwardEdibleForwardElse(rightEdibleRightElse(leftEdibleLeftElse(moveForwardOrThink)));
  var bob = new Critter({mind: new CritterMind({decisionTree: tree})});
  function getCoord() {
  return Math.floor(Math.random() * 10);
  }

  function getCoords() {
  return {x: getCoord(), y: getCoord()};
  }

  for (var i = 0; i < 50; i++) {
  ordial.world.place(new Resource(), getCoords());
  }
  for (var i = 0; i < 50; i++) {
  var blocker = new Rock();
  ordial.world.place(blocker, getCoords());
  }

  rob.direction = _.sample(CardinalDirection.ALL_DIRECTIONS);
  ordial.world.place(rob, getCoords());


  bob.direction = _.sample(CardinalDirection.ALL_DIRECTIONS);
  ordial.world.place(bob, getCoords());
</textarea>
<br/>
<button id="runCode">Run</button>

<h3>Finding food</h3>
<textarea>
    var isSomethingInFrontOfMe = function(stimuli) {
      return stimuli.thingInFrontOfMe;
    };
    var isThingInFrontOfMeEdible = function(stimuli) {
      return stimuli.thingInFrontOfMe instanceof Resource;
    };
    var isNothingToTheLeftOfMe = function(stimuli) {
      return !stimuli.thingToTheLeftOfMe;
    };

    var turnLeftOrTurnRight = new DecisionNode(isNothingToTheLeftOfMe, Critter.Actions.TURN_LEFT, Critter.Actions.TURN_RIGHT);
    var eatItOrThink = new DecisionNode(isThingInFrontOfMeEdible, Critter.Actions.MOVE_FORWARD, turnLeftOrTurnRight
    var moveForwardOrThink = new DecisionNode(isSomethingInFrontOfMe, eatItOrThink, Critter.Actions.MOVE_FORWARD);
    var rob = new Critter({mind: new CritterMind({decisionTree: moveForwardOrThink})});

    function getCoord() {
      return Math.floor(Math.random() * 10);
    }

    function getCoords() {
      return {x: getCoord(), y: getCoord()};
    }

    for(var i = 0; i < 50; i++) {
      ordial.world.place(new Resource(), getCoords());
    }
    for(var i = 0; i < 50; i++) {
      var blocker = new Rock();
      ordial.world.place(blocker, getCoords());
    }

    rob.direction = _.sample(CardinalDirection.ALL_DIRECTIONS);
    ordial.world.place(rob, getCoords());
</textarea>

<h3>Turn, Run, and Make Babies</h3>
<textarea>
  rob = new Critter({mind: new CritterMind({action: Critter.Actions.MOVE_FORWARD})});
  zoe = new Critter({mind: new CritterMind({action: Critter.Actions.TURN_LEFT})});
  kim = new Critter({mind: new CritterMind({action: Critter.Actions.REPRODUCE})});
  ordial.world.place(rob, {x: 4, y: 4});
  ordial.world.place(zoe, {x: 3, y: 7});
  ordial.world.place(kim, {x: 2, y: 2});

  ordial.world.place(new Resource(), {x: 1, y: 1});
  ordial.world.place(new Resource(), {x: 3, y: 4});
</textarea>

